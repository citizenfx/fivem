<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CFX UI</title>

  <script type="text/javascript">
    <%= (isProd || isWithGtm) ? require('assets/scripts/gtm.raw.js') : '' %>
  </script>

  <script type="text/javascript">
    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push({
      event: 'appStart',
      game: nuiTargetGame === 'gta5'
        ? 'FiveM - prod'
        : 'RedM - prod',
    });
  </script>

  <style>
    @keyframes shineLoader {
      from {
        background-color: white;
      }

      to {
        background-color: rgb(109, 109, 109);
      }
    }
    .loader {
      position: fixed;

      top: 0;
      left: 0;
      right: 0;
      bottom: 0;

      --color-fg: rgba(var(--color-main-950, 150, 150, 150), 1);
      --color-bg: rgba(var(--color-main, 0, 0, 0), 1);

      background-color: var(--color-fg);
      animation: shineLoader 1s linear infinite;

      z-index: 1;
    }
    .loader .mask {
      position: absolute;
      inset: 0;

      display: flex;
      flex-direction: column;
      align-items: center;

      padding-top: 70vh;

      box-sizing: border-box;

      font-family: Arial, Helvetica, sans-serif;
      font-weight: bold;
      font-size: 16px;

      color: var(--color-fg);
      background-color: var(--color-bg);

      transition: background-color .2s ease-in-out;

      --mask-gta5: url(<%= require('assets/images/gta5.svg') %>);
      --mask-rdr3: url(<%= require('assets/images/rdr3.svg') %>);

      -webkit-mask-image: linear-gradient(red, red), var(--mask);
      -webkit-mask-composite: xor;
      -webkit-mask-position: center center;
      -webkit-mask-repeat: no-repeat;
      -webkit-mask-size: 100%, 150px;

      transform: var(--transform);

      z-index: 1;
    }
    .loader .mask span {
      transform: var(--transform);
    }

    @keyframes shineLoaderFadeOut {
      from {
        background-color: var(--color-fg);
      }

      to {
        background-color: transparent;
      }
    }
    .loader.hide {
      animation: shineLoaderFadeOut .3s linear;
      background-color: transparent;
      pointer-events: none;
    }

    @keyframes maskFadeOut {
      from {
        background-color: var(--color-bg);
      }

      50% {
        color: transparent;
        background-color: var(--color-bg);
      }

      to {
        color: transparent;
        background-color: transparent;
      }
    }
    .loader.hide .mask {
      animation: maskFadeOut 1.5s ease-in forwards;
      animation-delay: .3s;
    }
  </style>

  <script type="text/javascript">
    document.querySelector('html').classList.add(`cfxui-theme-${nuiTargetGame}-dark`);
  </script>
</head>

<body>
  <div id="backdrop-outlet"></div>
  <div id="cfxui-root"></div>

  <div id="overlay-outlet"></div>

  <div id="loader" class="loader">
    <div id="loader-mask" class="mask">
      <span>
        loading...
      </span>
    </div>

    <script type="text/javascript">
      const $loaderMask = document.getElementById('loader-mask');

      $loaderMask.style.setProperty('--mask', `var(--mask-${nuiTargetGame})`);
    </script>
  </div>
</body>

</html>
